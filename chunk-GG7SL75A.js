import{a as Q,b as X}from"./chunk-BGJW4OQ3.js";import{a as Y,b as W,c as q,d as L,e as U,f as $,g as H,h as K,k as Z,n as J}from"./chunk-J7BNF3ZJ.js";import{$ as l,A as s,Aa as R,B as x,G as g,I as c,L as u,M as S,N as y,O as I,P as o,Q as a,R as p,S as N,T as F,U as E,V as d,W as w,_ as A,aa as C,ba as _,da as T,ha as k,ka as G,l as h,la as z,ma as D,na as B,q as M,r as f,u as O,ua as V,v as P,xa as j,ya as b}from"./chunk-VA5LK5KF.js";function ne(t,e){t&1&&(o(0,"div",12),p(1,"img",13),a())}function oe(t,e){t&1&&(o(0,"div",12),p(1,"img",13),a(),o(2,"div",12),p(3,"img",13),a())}function re(t,e){t&1&&(o(0,"div",12),p(1,"img",13),a(),o(2,"div",12),p(3,"img",13),a(),o(4,"div",12),p(5,"img",13),a())}function ae(t,e){if(t&1&&p(0,"span",17),t&2){let r=d().$index,n=d(2);c("ngClass",n.isCorrect[r]?"nice":"boo")}}function se(t,e){if(t&1&&(o(0,"div",9)(1,"span",14),l(2),a(),o(3,"span",15),l(4),a(),p(5,"input",16),g(6,ae,1,1,"span",17),o(7,"span",15),l(8),a()()),t&2){let r=e.$implicit,n=e.$index,i=d(2);s(2),_("",n+1,"."),s(2),_(" ",r.transformedText[0],""),s(),w("id",n),w("formControlName",r.id),s(),u(6,i.showAnswers&&i.exercise.studentAnswers?6:-1),s(2),C(r.transformedText[1])}}function me(t,e){if(t&1&&N(0,10),t&2){d(2);let r=A(3);c("ngTemplateOutlet",r)}}function ce(t,e){if(t&1){let r=F();o(0,"div",2)(1,"h3",3),l(2),a(),o(3,"div",4),g(4,ne,2,0,"ng-template",5)(5,oe,4,0,"ng-template",5)(6,re,6,0,"ng-template",5),a(),o(7,"a",6),l(8,"Go back"),a()(),o(9,"form",7),E("ngSubmit",function(){O(r);let i=d();return P(i.onSubmit())}),o(10,"div",8),y(11,se,9,6,"div",9,S),a(),g(13,me,1,1,"ng-container",10),o(14,"button",11),l(15,"Submit"),a()()}if(t&2){let r=d();s(2),C(r.exercise.title),s(),c("ngSwitch",r.exercise.difficulty),s(),c("ngSwitchCase",1),s(),c("ngSwitchCase",2),s(),c("ngSwitchCase",3),s(3),c("formGroup",r.exerciseForm),s(2),I(r.exercise.text),s(2),u(13,r.showNote&&r.showAnswers?13:-1),s(),c("disabled",!r.exerciseForm.valid)}}function pe(t,e){t&1&&(o(0,"div",18),l(1," The exercise was added to your shelf "),a())}var te=(()=>{let e=class e{constructor(n,i,m,v){this.route=n,this.grammarService=i,this.userService=m,this.answerGrammarService=v,this.showAnswers=!1,this.showNote=!1}ngOnInit(){let n=this.route.snapshot.paramMap.get("id"),i=this.route.snapshot.queryParamMap.get("id"),m=n||i;m&&this.getExercise(m)}getExercise(n){this.grammarService.getGrammarByIdWOAnswers(n).subscribe(i=>{this.exercise=i,this.idNumber=i.text.map(m=>m.id),this.exerciseForm=this.createFormGroup(this.idNumber)})}createFormGroup(n){let i={};return n.forEach((m,v)=>{i[m]=new $("",W.required)}),new U(i)}onSubmit(){this.answerForDB={userId:"",exerciseId:"",type:"",title:"",difficulty:0,realAnswers:[],text:[],studentAnswers:[]};let n=this.exerciseForm.getRawValue();for(let[i,m]of Object.entries(n))this.answerForDB.studentAnswers.push({id:Number(i),answer:m});this.user=this.userService.getUser(),this.answerForDB.userId=this.user._id,this.answerForDB.exerciseId=this.exercise._id,this.answerForDB.type=this.exercise.type,this.answerForDB.title=this.exercise.title,this.answerForDB.difficulty=this.exercise.difficulty,this.answerForDB.text=this.exercise.text,this.answerGrammarService.checkAndPostAnswer(this.answerForDB).subscribe(i=>{console.log("CHECK AND POST ANSWER",i),this.checkedAnswers=i,console.log(this.checkedAnswers),console.log("STUDENT ANSWEWRS",this.checkedAnswers.studentAnswers),this.isCorrect=this.checkedAnswers.studentAnswers.map(m=>m.isCorrect)}),this.showAnswers=!0,this.showNoteFn()}showNoteFn(){this.showNote=!0,setTimeout(()=>{this.showNote=!1},6e3)}};e.\u0275fac=function(i){return new(i||e)(x(V),x(Q),x(R),x(X))},e.\u0275cmp=M({type:e,selectors:[["app-grammar-item"]],decls:4,vars:1,consts:[["note",""],[1,"container","main-content"],[1,"title-info"],[1,"title","h3"],[1,"difficulty",3,"ngSwitch"],[3,"ngSwitchCase"],["routerLink","/exercises/grammar"],[1,"form",3,"ngSubmit","formGroup"],[1,"exercise-wrapper"],[1,"text-wrapper"],[3,"ngTemplateOutlet"],["type","submit",1,"btnYellow",3,"disabled"],[1,"logo-img"],["src","assets/img/icons/rain.png","alt","rain"],[1,"id"],[1,"text-el"],["type","text",1,"input",3,"id","formControlName"],[3,"ngClass"],[1,"note"]],template:function(i,m){i&1&&(o(0,"div",1),g(1,ce,16,8)(2,pe,2,0,"ng-template",null,0,T),a()),i&2&&(s(),u(1,m.exercise?1:-1))},dependencies:[k,D,G,z,j,H,Y,q,L,K,Z],styles:['.none[_ngcontent-%COMP%]{display:none!important}@media (max-width: 1199px){.container[_ngcontent-%COMP%]{width:900px}}@media (max-width: 990px){.container[_ngcontent-%COMP%]{width:764px}}@media (max-width: 765px){.container[_ngcontent-%COMP%]{width:575px}}@media (max-width: 576px){.container[_ngcontent-%COMP%]{width:320px}}.btnYellow[_ngcontent-%COMP%]{width:340px;height:60px;border:none;border-radius:30px;background-color:#ecca81b3;font-weight:700;font-size:24px;line-height:60px;text-transform:uppercase;color:#544032;cursor:pointer;transition:all .2s ease-in}.btnYellow[_ngcontent-%COMP%]:hover, .btnYellow[_ngcontent-%COMP%]:active{background-color:#ecca81f2}.btnYellow[_ngcontent-%COMP%]:disabled{background-color:#b8d9de80;color:#544032cc}@media (max-width: 576px){.btnYellow[_ngcontent-%COMP%]{width:280px;height:50px;font-size:20px;font-weight:700;line-height:24px}}.h1[_ngcontent-%COMP%]{font-size:64px;font-weight:700;line-height:78px}@media (max-width: 1199px){.h1[_ngcontent-%COMP%]{font-size:48px;font-weight:700;line-height:59px}}@media (max-width: 990px){.h1[_ngcontent-%COMP%]{font-size:36px;font-weight:700;line-height:44px}}@media (max-width: 576px){.h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;line-height:29px}}.h2[_ngcontent-%COMP%]{color:#0d2328;font-size:36px;font-weight:600;line-height:44px;letter-spacing:1.2px;text-align:center}@media (max-width: 576px){.h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;line-height:24px}}.h3[_ngcontent-%COMP%]{font-size:26px;font-weight:500;letter-spacing:1.1px}@media (max-width: 765px){.h3[_ngcontent-%COMP%]{font-size:24px}}@media (max-width: 576px){.h3[_ngcontent-%COMP%]{font-size:18px}}.title[_ngcontent-%COMP%]{margin-block:30px}@media (max-width: 990px){.title[_ngcontent-%COMP%]{margin-block:33px}}@media (max-width: 765px){.title[_ngcontent-%COMP%]{margin-block:23px}}@media (max-width: 576px){.title[_ngcontent-%COMP%]{margin-top:18px;margin-bottom:25px}}.title-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;align-items:center}.difficulty[_ngcontent-%COMP%]{display:flex;column-gap:8px;text-align:center}.logo-img[_ngcontent-%COMP%]{width:35px;background-color:#ecf4f5;border-radius:50%}.form[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;margin:20px auto;row-gap:50px}.exercise-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;font-size:20px}@media (max-width: 576px){.exercise-wrapper[_ngcontent-%COMP%]{row-gap:16px;font-size:16px}}.id[_ngcontent-%COMP%]{font-weight:500}.input[_ngcontent-%COMP%]{width:250px;height:24px;border-radius:8px;padding-inline:5px;text-align:center;box-shadow:0 0 45px 3px #aadce366 inset}@media (max-width: 576px){.input[_ngcontent-%COMP%]{width:200px;height:20px;border-radius:6px;padding-inline:3px}}.nice[_ngcontent-%COMP%], .boo[_ngcontent-%COMP%]{position:relative}.nice[_ngcontent-%COMP%]:before, .boo[_ngcontent-%COMP%]:before{content:"";width:24px;height:24px;position:absolute;background-size:cover;right:8px;border-radius:50%}@media (max-width: 576px){.nice[_ngcontent-%COMP%]:before, .boo[_ngcontent-%COMP%]:before{width:20px;height:20px;right:5px}}.nice[_ngcontent-%COMP%]:before{background-image:url("./media/umbrellaNoBg-MZVB4EVL.png");background-color:#80a73380}.boo[_ngcontent-%COMP%]:before{background-image:url("./media/rain-TPCTOT5R.png");background-color:#e99c7e80}.note[_ngcontent-%COMP%]{position:absolute;bottom:70px}@media (max-width: 576px){.note[_ngcontent-%COMP%]{font-size:14px;bottom:60px}}']});let t=e;return t})();var le=[{path:"",component:te}],ie=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=f({type:e}),e.\u0275inj=h({imports:[b.forChild(le),b]});let t=e;return t})();var Ie=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=f({type:e}),e.\u0275inj=h({imports:[B,ie,J]});let t=e;return t})();export{Ie as GrammarItemModule};
